# Effluent.io Environment Configuration
# Copy this file to .env and fill in the values

# =============================================================================
# BACKEND CONFIGURATION
# =============================================================================

# Django Settings
# ---------------
# REQUIRED: Generate a secure secret key for production
# Run: python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
SECRET_KEY=your-secret-key-here

# Django settings module (config.settings.dev or config.settings.prod)
DJANGO_SETTINGS_MODULE=config.settings.dev

# Debug mode (set to False in production)
DEBUG=True

# Allowed hosts (comma-separated for multiple)
ALLOWED_HOSTS=localhost,127.0.0.1

# Database Configuration
# ----------------------
# PostgreSQL connection settings
DB_NAME=effluent
DB_USER=effluent
DB_PASSWORD=your-database-password-here
DB_HOST=localhost
DB_PORT=5432

# CORS Configuration
# ------------------
# Allowed origins for CORS (comma-separated)
# IMPORTANT: Use HTTPS URLs in production to avoid mixed content issues
# Development: http://localhost:3000,http://127.0.0.1:3000
# Production:  https://app.effluent.io
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================

# API URL Configuration
# ---------------------
# The frontend uses two URL patterns:
# 1. Client-side: Always uses same-origin /api/* routing (no URL needed)
# 2. Server-side: Uses INTERNAL_API_URL for direct backend communication

# IMPORTANT: NEXT_PUBLIC_API_URL should NOT be set
# ------------------------------------------------
# DO NOT set NEXT_PUBLIC_API_URL - it is intentionally not used.
# Setting it to an HTTP URL could cause mixed content warnings in browsers.
# The frontend uses same-origin /api/* routing which Traefik proxies to the backend.
# This ensures the browser always uses HTTPS when the page is served over HTTPS.

# Internal API URL (for server-side requests within Docker network)
# -----------------------------------------------------------------
# This is HTTP because it's internal Docker networking - Traefik handles HTTPS externally.
# This URL is ONLY used server-side and never exposed to the browser.
# Development: http://localhost:8000
# Production (Docker): http://backend:8000
INTERNAL_API_URL=http://localhost:8000

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================

# PostgreSQL container settings (used by docker-compose)
POSTGRES_DB=effluent
POSTGRES_USER=effluent
POSTGRES_PASSWORD=your-database-password-here

# =============================================================================
# PRODUCTION ONLY
# =============================================================================

# HTTPS/TLS Configuration
# -----------------------
# Enable secure cookies (required for HTTPS)
SECURE_COOKIES=true

# Let's Encrypt email for certificate notifications
ACME_EMAIL=admin@effluent.io

# Stripe (for subscriptions - production only)
# STRIPE_SECRET_KEY=sk_live_...
# STRIPE_WEBHOOK_SECRET=whsec_...

# Email Configuration (production only)
# EMAIL_HOST=smtp.example.com
# EMAIL_PORT=587
# EMAIL_HOST_USER=your-email@example.com
# EMAIL_HOST_PASSWORD=your-email-password
# EMAIL_USE_TLS=True
# DEFAULT_FROM_EMAIL=noreply@effluent.io

# Sentry Error Tracking (production only)
# SENTRY_DSN=https://...@sentry.io/...
